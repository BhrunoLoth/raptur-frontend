import{r,j as e}from"./index-B9Nf5u-5.js";import{a as w}from"./index-ngrFHoWO.js";const k=()=>{const[n,x]=r.useState(""),[d,g]=r.useState(""),[u,b]=r.useState(""),[i,l]=r.useState(""),[m,s]=r.useState(""),[h,c]=r.useState(!1),f=r.useRef(null),I="https://api.seudominio.com/api",E=localStorage.getItem("token"),y=()=>{var a;x(""),g(""),b(""),(a=f.current)==null||a.focus()},S=async a=>{var t,v,j,N;if(a.preventDefault(),l(""),s(""),c(!0),!n||!d||!u){s("Todos os campos são obrigatórios."),c(!1);return}try{const o=await w.post(`${I}/embarques`,{usuarioId:Number(n),viagemId:Number(d),veiculoId:Number(u)},{headers:{Authorization:`Bearer ${E}`}});l(o.data.mensagem||"✅ Embarque registrado com sucesso!"),y()}catch(o){const q=((v=(t=o.response)==null?void 0:t.data)==null?void 0:v.erro)||((N=(j=o.response)==null?void 0:j.data)==null?void 0:N.message)||"Erro ao registrar embarque.";s(`❌ ${q}`)}finally{c(!1)}},p=a=>t=>{a(t.target.value.replace(/[^0-9]/g,"")),i&&l(""),m&&s("")};return e.jsxs("div",{className:"dashboard-main-card max-w-lg mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"🚌 Registrar Embarque Manual"}),e.jsxs("form",{onSubmit:S,className:"grid gap-4",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Usuário ID"}),e.jsx("input",{type:"text",value:n,onChange:p(x),placeholder:"Ex: 101",required:!0,className:"w-full border px-3 py-2 rounded",inputMode:"numeric",ref:f,autoFocus:!0,maxLength:8})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Viagem ID"}),e.jsx("input",{type:"text",value:d,onChange:p(g),placeholder:"Ex: 202",required:!0,className:"w-full border px-3 py-2 rounded",inputMode:"numeric",maxLength:8})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Veículo ID"}),e.jsx("input",{type:"text",value:u,onChange:p(b),placeholder:"Ex: 303",required:!0,className:"w-full border px-3 py-2 rounded",inputMode:"numeric",maxLength:8})]}),e.jsx("button",{type:"submit",className:"bg-green-700 hover:bg-green-800 text-white py-2 rounded",disabled:h,children:h?"Enviando...":"🚀 Enviar"})]}),i&&e.jsx("div",{className:"text-green-700 mt-4 bg-green-50 p-3 rounded border border-green-300 text-center font-medium",children:i}),m&&e.jsx("div",{className:"text-red-700 mt-4 bg-red-50 p-3 rounded border border-red-300 text-center font-medium",children:m})]})};export{k as default};
