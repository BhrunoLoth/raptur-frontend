import{r as a,j as e,B,P as b,T as y,b as C,C as M}from"./index-B9Nf5u-5.js";import{a as d}from"./index-ngrFHoWO.js";import{S as N}from"./Stack-GsMMUsNa.js";import{T as o}from"./TextField-t-1AHP0N.js";import{T as A,a as W,b as P,c as m,d as r,e as $}from"./TableRow-CpLTdYJq.js";import"./useThemeProps-g9lUOIHl.js";const h="https://api.seudominio.com/api";function F(){const[x,S]=a.useState([]),[s,u]=a.useState(""),[i,f]=a.useState(""),[n,j]=a.useState(""),[p,g]=a.useState("123456"),[T,v]=a.useState(!1),l={Authorization:`Bearer ${localStorage.getItem("token")}`},c=async()=>{v(!0);try{const t=await d.get(`${h}/motoristas`,{headers:l});S(Array.isArray(t.data)?t.data:[])}catch(t){console.error("Erro ao carregar motoristas:",t)}v(!1)},E=async()=>{if(!s.trim()||!i.trim()||!n.trim()){alert("Preencha todos os campos obrigatórios.");return}try{await d.post(`${h}/motoristas`,{nome:s,email:i,senha:p,cnh:n},{headers:l}),u(""),f(""),j(""),g("123456"),c()}catch(t){console.error("Erro ao criar motorista:",t),alert("Erro ao criar motorista.")}},k=async t=>{if(window.confirm("Tem certeza que deseja remover este motorista?"))try{await d.delete(`${h}/motoristas/${t}`,{headers:l}),c()}catch(w){console.error("Erro ao remover motorista:",w),alert("Erro ao remover motorista.")}};return a.useEffect(()=>{c()},[]),e.jsxs(B,{sx:{maxWidth:800,mx:"auto",p:3},children:[e.jsxs(b,{elevation:3,sx:{p:3,mb:4},children:[e.jsx(y,{variant:"h5",gutterBottom:!0,children:"🧑‍✈️ Gerenciar Motoristas"}),e.jsxs(N,{spacing:2,children:[e.jsx(o,{label:"Nome",value:s,fullWidth:!0,onChange:t=>u(t.target.value)}),e.jsx(o,{label:"Email",value:i,type:"email",fullWidth:!0,onChange:t=>f(t.target.value)}),e.jsx(o,{label:"CNH",value:n,fullWidth:!0,onChange:t=>j(t.target.value)}),e.jsx(o,{label:"Senha (padrão)",value:p,type:"password",fullWidth:!0,onChange:t=>g(t.target.value)}),e.jsx(C,{onClick:E,variant:"contained",fullWidth:!0,sx:{mt:1},children:"➕ Cadastrar Motorista"})]})]}),e.jsx(y,{variant:"h6",gutterBottom:!0,children:"📋 Lista de Motoristas"}),T?e.jsx(M,{sx:{display:"block",mx:"auto",my:4}}):e.jsx(A,{component:b,sx:{mt:2},children:e.jsxs(W,{children:[e.jsx(P,{sx:{backgroundColor:"#004225"},children:e.jsxs(m,{children:[e.jsx(r,{sx:{color:"#fff"},children:"Nome"}),e.jsx(r,{sx:{color:"#fff"},children:"Email"}),e.jsx(r,{sx:{color:"#fff"},children:"CNH"}),e.jsx(r,{sx:{color:"#fff"},children:"Ações"})]})}),e.jsx($,{children:x.length===0?e.jsx(m,{children:e.jsx(r,{colSpan:4,align:"center",sx:{opacity:.7},children:"Nenhum motorista cadastrado"})}):x.map(t=>e.jsxs(m,{children:[e.jsx(r,{children:t.nome}),e.jsx(r,{children:t.email}),e.jsx(r,{children:t.cnh||"N/A"}),e.jsx(r,{children:e.jsx(C,{variant:"contained",color:"error",onClick:()=>k(t.id),children:"Remover"})})]},t.id))})]})})]})}export{F as default};
