import{r as n,j as e}from"./index-B9Nf5u-5.js";function p(){const[i,c]=n.useState([]),[a,m]=n.useState(""),[d,l]=n.useState(!0);n.useEffect(()=>{(async()=>{l(!0);try{const r=localStorage.getItem("token"),s=JSON.parse(localStorage.getItem("usuario"));if(!r||!(s!=null&&s.id))throw new Error("Usuário não autenticado.");const o=await fetch(`https://api.seudominio.com/api/motoristas/${s.id}/embarques`,{headers:{Authorization:`Bearer ${r}`}});if(o.status===401){m("Sessão expirada. Faça login novamente."),c([]),l(!1);return}if(!o.ok){const h=await o.json().catch(()=>({}));throw new Error(h.erro||"Erro ao buscar histórico.")}const u=await o.json();c(Array.isArray(u)?u:[])}catch(r){m(r.message||"Erro ao buscar histórico."),c([])}finally{l(!1)}})()},[]);const x=t=>{try{return t?new Date(t).toLocaleString("pt-BR",{hour12:!1}):"---"}catch{return String(t)}};return e.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md max-w-3xl mx-auto mt-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4 text-green-800 text-center",children:"Histórico de Embarques de Hoje"}),d&&e.jsx("p",{className:"text-gray-600 text-center",children:"Carregando..."}),a&&e.jsx("p",{className:"text-red-600 text-sm mb-4 text-center",children:a}),!d&&!a&&i.length===0&&e.jsx("p",{className:"text-gray-600 text-center",children:"Nenhum embarque registrado hoje."}),!d&&!a&&i.length>0&&e.jsx("ul",{className:"space-y-3",children:i.map(t=>{var r,s;return e.jsxs("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm text-sm md:text-base",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Passageiro:"})," ",((r=t.usuario)==null?void 0:r.nome)||"---"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ônibus:"})," ",((s=t.veiculo)==null?void 0:s.placa)||"---"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Data/Hora:"})," ",x(t.data||t.dataHora)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",t.status||"---"]})]},t.id)})})]})}export{p as default};
