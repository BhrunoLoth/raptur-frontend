import{r,u as y,j as e}from"./index-B9Nf5u-5.js";import{P}from"./PublicLayout-CMtIB1BJ.js";const E="https://api.seudominio.com/api";function R(){const[u,d]=r.useState(""),[s,p]=r.useState(""),[a,g]=r.useState(""),[c,f]=r.useState("aluno_pagante"),[n,x]=r.useState(""),[l,h]=r.useState(""),[m,o]=r.useState(""),[v,b]=r.useState(!1),j=y(),C=t=>t.replace(/\D/g,"").length===11,N=t=>/\S+@\S+\.\S+/.test(t),S=async t=>{if(t.preventDefault(),o(""),!u.trim()||!s.trim()||!a.trim()||!n.trim()||!l.trim()){o("Preencha todos os campos obrigatórios.");return}if(!N(s)){o("Digite um e-mail válido.");return}if(!C(n)){o("CPF deve conter 11 dígitos numéricos.");return}if(a.length<6){o("Senha deve ter pelo menos 6 caracteres.");return}try{const i=await fetch(`${E}/usuarios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nome:u,email:s,senha:a,perfil:"passageiro",subtipo_passageiro:c,cpf:n.replace(/\D/g,""),rg:l})});if(!i.ok){const w=await i.json();throw new Error(w.erro||"Erro ao cadastrar usuário")}b(!0),setTimeout(()=>j("/login"),2e3)}catch(i){o(i.message)}};return e.jsx(P,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-green-100 to-orange-100 px-4 py-8",children:e.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-green-800",children:"Cadastro de Passageiro"}),e.jsx("p",{className:"text-center text-sm text-red-500 mb-2",children:"Nome, e-mail, senha, subtipo, CPF e RG são obrigatórios."}),m&&e.jsx("p",{className:"text-red-600 text-sm mb-2 text-center",children:m}),v&&e.jsx("p",{className:"text-green-600 text-sm mb-2 text-center",children:"Cadastro realizado! Redirecionando..."}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Nome completo",value:u,onChange:t=>d(t.target.value),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,autoComplete:"off"}),e.jsx("input",{type:"email",placeholder:"E-mail",value:s,onChange:t=>p(t.target.value),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,autoComplete:"off"}),e.jsx("input",{type:"password",placeholder:"Senha (mínimo 6 caracteres)",value:a,onChange:t=>g(t.target.value),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,minLength:6}),e.jsxs("select",{value:c,onChange:t=>f(t.target.value),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,children:[e.jsx("option",{value:"aluno_pagante",children:"Aluno Pagante"}),e.jsx("option",{value:"aluno_gratuito",children:"Aluno Gratuito"}),e.jsx("option",{value:"idoso",children:"Idoso"}),e.jsx("option",{value:"comum",children:"Usuário Comum"})]}),e.jsx("input",{type:"text",placeholder:"CPF (apenas números)",value:n,onChange:t=>x(t.target.value.replace(/\D/g,"")),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,maxLength:11,inputMode:"numeric",pattern:"[0-9]{11}",autoComplete:"off"}),e.jsx("input",{type:"text",placeholder:"RG",value:l,onChange:t=>h(t.target.value),className:"w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-400",required:!0,maxLength:12,autoComplete:"off"}),e.jsx("button",{type:"submit",className:"w-full bg-green-700 text-white py-2 rounded hover:bg-green-800 transition",children:"Cadastrar"})]}),e.jsx("div",{className:"text-sm text-center mt-3",children:e.jsx("a",{href:"/login",className:"text-green-700 hover:underline",children:"Voltar para login"})})]})})})}export{R as default};
