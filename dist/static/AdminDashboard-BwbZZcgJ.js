import{r as n,j as r,B as m,C as A,A as p,T as s}from"./index-B9Nf5u-5.js";import{B as P,P as B,C as T,a as q,L as D,b as F,A as w,p as N,c as O,d as U}from"./index-DVFSxR7X.js";import{a as x}from"./api-DLJ_9syT.js";import{G as e}from"./Grid-CnWnp_Lf.js";import{C as o,a as c}from"./CardContent-Be5sf3AR.js";import"./index-ngrFHoWO.js";import"./useThemeProps-g9lUOIHl.js";T.register(q,D,F,w,N,O,U);function W(){const[t,g]=n.useState(null),[a,f]=n.useState(null),[b,y]=n.useState([]),[u,v]=n.useState(null),[C,E]=n.useState(!0);if(n.useEffect(()=>{const i=localStorage.getItem("usuario");if(i)try{v(JSON.parse(i))}catch{console.error("Erro ao carregar usu√°rio do localStorage")}(async()=>{try{const[l,j,h]=await Promise.all([x.get("/admin/dashboard/resumo").then(d=>d.data),x.get("/admin/dashboard/notificacoes").then(d=>d.data),x.get("/admin/dashboard/estatisticas").then(d=>d.data)]);g(l&&!l.erro?l:null),y(Array.isArray(j)?j:[]),f(h&&!h.erro?h:null)}catch(l){console.error("Erro ao carregar dados do dashboard:",l)}finally{E(!1)}})()},[]),C)return r.jsx(m,{sx:{p:4,display:"flex",justifyContent:"center"},children:r.jsx(A,{})});if(!t||!a)return r.jsx(m,{sx:{p:4},children:r.jsx(p,{severity:"error",children:"‚ö†Ô∏è Dados incompletos ou n√£o carregados. Verifique a API."})});const R={labels:["Pagamentos","Embarques"],datasets:[{label:"Resumo",data:[typeof t.totalPagamentos=="number"?t.totalPagamentos:0,typeof t.totalEmbarques=="number"?t.totalEmbarques:0],backgroundColor:["#00C853","#2979FF"],borderRadius:6}]},S={labels:Object.keys(a.distribuicaoTipos??{}),datasets:[{data:Object.values(a.distribuicaoTipos??{}),backgroundColor:["#4CAF50","#FF9800","#03A9F4","#E91E63","#9C27B0"]}]};return r.jsxs(m,{sx:{p:{xs:2,sm:4}},children:[r.jsx(s,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Dashboard"}),r.jsxs(s,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:["Bem-vindo(a), ",(u==null?void 0:u.nome)??"Administrador"," üëã"]}),r.jsxs(e,{container:!0,spacing:2,children:[r.jsx(e,{item:!0,xs:12,sm:4,children:r.jsx(o,{sx:{bgcolor:"#1b5e20",color:"white",borderRadius:3},children:r.jsxs(c,{children:[r.jsx(s,{variant:"h6",children:"üí∞ Total Pagamentos"}),r.jsxs(s,{variant:"h5",children:["R$ ",typeof t.totalPagamentos=="number"?t.totalPagamentos.toFixed(2):"--"]})]})})}),r.jsx(e,{item:!0,xs:12,sm:4,children:r.jsx(o,{sx:{bgcolor:"#1565c0",color:"white",borderRadius:3},children:r.jsxs(c,{children:[r.jsx(s,{variant:"h6",children:"üöå Total Embarques"}),r.jsx(s,{variant:"h5",children:typeof t.totalEmbarques=="number"?t.totalEmbarques:"--"})]})})}),r.jsx(e,{item:!0,xs:12,sm:4,children:r.jsx(o,{sx:{bgcolor:"#4a148c",color:"white",borderRadius:3},children:r.jsxs(c,{children:[r.jsx(s,{variant:"h6",children:"üë• Total Usu√°rios"}),r.jsx(s,{variant:"h5",children:typeof a.totalUsuarios=="number"?a.totalUsuarios:"--"})]})})}),r.jsx(e,{item:!0,xs:12,sm:6,children:r.jsx(o,{sx:{bgcolor:"#006064",color:"white",borderRadius:3},children:r.jsxs(c,{children:[r.jsx(s,{variant:"h6",children:"üßë‚Äç‚úàÔ∏è Total Motoristas"}),r.jsx(s,{variant:"h5",children:typeof a.totalMotoristas=="number"?a.totalMotoristas:"--"})]})})}),r.jsx(e,{item:!0,xs:12,sm:6,children:r.jsx(o,{sx:{bgcolor:"#880e4f",color:"white",borderRadius:3},children:r.jsxs(c,{children:[r.jsx(s,{variant:"h6",children:"üöå Total √înibus"}),r.jsx(s,{variant:"h5",children:typeof a.totalOnibus=="number"?a.totalOnibus:"--"})]})})}),r.jsx(e,{item:!0,xs:12,md:6,children:r.jsxs(o,{sx:{p:2,borderRadius:4},children:[r.jsx(s,{variant:"h6",mb:2,children:"Resumo Visual"}),r.jsx(P,{data:R})]})}),r.jsx(e,{item:!0,xs:12,md:6,children:r.jsxs(o,{sx:{p:2,borderRadius:4},children:[r.jsx(s,{variant:"h6",mb:2,children:"Usu√°rios por Categoria"}),r.jsx(B,{data:S})]})}),r.jsxs(e,{item:!0,xs:12,children:[r.jsx(s,{variant:"h6",gutterBottom:!0,children:"üì¢ Notifica√ß√µes"}),b.length>0?b.map(i=>r.jsx(p,{severity:i.tipo||"info",sx:{mb:1,borderRadius:2},children:i.mensagem},i.id)):r.jsx(s,{variant:"body2",color:"textSecondary",children:"Nenhuma notifica√ß√£o dispon√≠vel."})]})]})]})}export{W as default};
