import{r as o,j as a,ak as x,u as f}from"./index-B9Nf5u-5.js";import{b as g,P as j}from"./idosoService-DSzU6Eut.js";import{Q as N}from"./index-Y5_mabEb.js";import{A as v}from"./arrow-left-DNL3DQPg.js";import"./api-DLJ_9syT.js";import"./index-ngrFHoWO.js";function y(r=""){return String(r).replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function $(r=""){const s=r?new Date(r):null;if(!s||isNaN(s))return"-";const t=String(s.getDate()).padStart(2,"0"),e=String(s.getMonth()+1).padStart(2,"0"),i=s.getFullYear();return`${t}/${e}/${i}`}function h(r=""){const s=r?new Date(r):null;if(!s||isNaN(s))return"-";const t=String(s.getMonth()+1).padStart(2,"0"),e=s.getFullYear();return`${t}/${e}`}const C=o.forwardRef(({idoso:r,fotoPreview:s},t)=>{if(!r)return null;const{nome:e,cpf:i,numeroCarteira:d,dataNascimento:l,dataEmissao:c,dataValidade:m,qrConteudo:n,id:u}=r,p=n||`raptur:idoso:${u}`;return a.jsxs("div",{ref:t,className:"carteirinha-wrap",children:[a.jsx("img",{className:"carteirinha-bg",src:"/assets/carteirinha-template.png",alt:"template"}),a.jsx("div",{className:"carteirinha-foto",children:s?a.jsx("img",{src:s,alt:"foto do idoso"}):a.jsx("div",{className:"foto-placeholder"})}),a.jsx("div",{className:"carteirinha-nome",children:e||"-"}),a.jsxs("div",{className:"carteirinha-linha",children:[a.jsx("strong",{children:"CPF:"})," ",y(i)]}),a.jsxs("div",{className:"carteirinha-linha",children:[a.jsx("strong",{children:"Nº:"})," ",d||"-"]}),a.jsxs("div",{className:"carteirinha-linha",children:[a.jsx("strong",{children:"Nascimento:"})," ",$(l)]}),a.jsxs("div",{className:"carteirinha-linha",children:[a.jsx("strong",{children:"Emissão:"})," ",h(c)]}),a.jsxs("div",{className:"carteirinha-linha",children:[a.jsx("strong",{children:"Validade:"})," ",h(m)]}),a.jsx("div",{className:"carteirinha-qr",children:a.jsx(N,{value:p,size:96,includeMargin:!1})})]})}),S="https://api.seudominio.com/api";function I(){const{id:r}=x(),s=f(),[t,e]=o.useState(null),[i,d]=o.useState(""),[l,c]=o.useState(!0);o.useEffect(()=>{(async()=>{try{c(!0);const n=await g(r);e(n),d("")}catch(n){console.error(n),d("Erro ao carregar dados do idoso")}finally{c(!1)}})()},[r]);const m=()=>window.open(`${S}/idosos/${r}/carteirinha.pdf`,"_blank","noopener");return l?a.jsx("div",{style:{padding:16},children:"Carregando..."}):i||!t?a.jsx("div",{style:{padding:16},children:i||"Não encontrado"}):a.jsxs("div",{style:{padding:16},children:[a.jsxs("div",{className:"no-print",style:{display:"flex",gap:8,marginBottom:12},children:[a.jsxs("button",{onClick:()=>s("/admin/idosos"),style:{display:"flex",gap:6},children:[a.jsx(v,{size:16})," Voltar"]}),a.jsxs("button",{onClick:m,style:{display:"flex",gap:6},children:[a.jsx(j,{size:16})," Abrir PDF"]})]}),a.jsx(C,{idoso:t})]})}export{I as default};
