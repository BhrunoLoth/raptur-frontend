import{r as d,j as e}from"./index-B9Nf5u-5.js";import{a as m}from"./index-ngrFHoWO.js";import{E as x}from"./jspdf.plugin.autotable-Bn4SibeE.js";const h="https://api.seudominio.com/api";function p(s){const n=["ID","Passageiro","Data"],t=s.map(o=>[o.id,o.passageiro,o.data]),c="data:text/csv;charset=utf-8,"+n.join(",")+`
`+t.map(o=>o.join(",")).join(`
`),a=document.createElement("a");a.setAttribute("href",encodeURI(c)),a.setAttribute("download","embarques.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}function u(s){const n=new x;n.text("Embarques Recentes",14,16),n.autoTable({startY:22,head:[["ID","Passageiro","Data"]],body:s.map(t=>[t.id,t.passageiro,t.data])}),n.save("embarques.pdf")}function b(){const[s,n]=d.useState([]),[t,c]=d.useState(navigator.onLine),[a,o]=d.useState("");return d.useEffect(()=>{t&&(async()=>{try{const r=localStorage.getItem("token"),l=await m.get(`${h}/motorista/embarques`,{headers:{Authorization:`Bearer ${r}`}});n(l.data)}catch(r){console.error("Erro ao carregar embarques:",r),o("Erro ao carregar embarques.")}})()},[t]),d.useEffect(()=>{const i=()=>c(!0),r=()=>c(!1);return window.addEventListener("online",i),window.addEventListener("offline",r),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",r)}},[]),e.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"🧑‍✈️ Painel do Motorista"}),e.jsxs("div",{className:"bg-white p-4 rounded shadow mb-4",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:t?"text-green-600":"text-yellow-600",children:t?"Online 🌐":"Offline 🛰️"})]}),a&&e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:a})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Embarques Recentes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"export-btn",onClick:()=>u(s),children:"📄 PDF"}),e.jsx("button",{className:"export-btn",onClick:()=>p(s),children:"📑 CSV"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Passageiro"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-500",children:"Nenhum embarque encontrado"})}):s.map((i,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:i.id}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:i.passageiro}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-800",children:i.data})]},r))})]})})]})]})}export{b as default};
